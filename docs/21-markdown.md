---
layout: page
title: 第一节 Markdown 基础
chapter_title: 第二章 编辑基础
permalink: /docs/markdown/
---

Markdown 是目前网络上使用比较普遍且深入人心的标记语言。

本书使用的是 Markdown 的 Ruby 实现——[kramdown](https://kramdown.gettalong.org/index.html)。kramdown 的命名就是将 mark 逆向写出而已，不要写成 Kramdown，就是 kramdown。

kramdown 是 Markdown 的一个超集，仅有小部分语法在标准 Markdown 中没有实现。

kramdown 有两部分元素标记：块级（block）和行内级（span）。块级标识用于创建段落，标题，列表等，行内元素用于标识句子内部的文字加粗，加链接等。

## 一 块级标识：主结构标识

### 1 段落

连续书写的文字行被认为是一个段落。当想要与另一个块级元素分开来时，就需要添加一个空行。如果需要在段落内断行可以通过行末加上两个空格或者两个反斜线实现加入超文本中的`<br >`标签。

示例：

第一行文字到这里\\
然后开始第二行文字

实现方式：

~~~
# 第一种方法在第一行末加入两个空格
第一行文字到这里  
然后开始第二行文字

# 第二种方法在第一行末加入两个反斜线
第一行文字到这里\\
然后开始第二行文字
~~~

如果行末只加一个空格，会被忽略掉，然后将挨着的两行以一个空格连接。

### 2 标题

kramdown 支持 Setext 样式标题和 atx 样式标题。标题的开始必须前面有一个空行隔开，除非恰好是一个文献的开始：

Setext 格式示例：

Setext 格式一级标题
===================

Setext 格式二级标题
-------------------

实现方式：

~~~
# Setext 格式

Setext 格式一级标题
===================

Setext 格式二级标题
-------------------
~~~

atx 格式示例：

# atx 格式一级标题

## atx 格式二级标题

### atx 格式三级标题

#### atx 格式四级标题

实现方式：

~~~
# atx 格式

# atx 格式一级标题

## atx 格式二级标题

### atx 格式三级标题

#### atx 格式四级标题
~~~

两者在一、二级标题使用上没什么区别，但是超出二级以后就只能使用 atx 格式标题了。

如果设置参数 auto-ids 为 fasle，那么标题的自动生成 ID 功能将关闭：

示例:

{::options auto_ids="false" /}
# 没有 ID 的标题

实现方式：

~~~
{::options auto_ids="false" /}
# 没有 ID 的标题
~~~

可以通过查看网页源代码方式查看是否生成 ID。

### 3 块引用

块引用使用 `>` 标记开始，后面跟着一个可选的空格；所有始于块引用标记的行都属于块引用。块引用内可以使用任何块级标记。

例如：

> 一个块引用示例。
>
> >内嵌于块引用的块引用也是
> >可以的。
>
> ## 标题也是正常的
> 这是外部引用。

实现方式：

~~~
> 一个块引用示例。
>
> >内嵌于块引用的块引用也是
> >可以的。
>
> ## 标题也是正常的
> 这是外部引用。
~~~

也可以使用偷懒方式用一个 `>` 标记来标记所有没有空行的段落：

> 这是一个块引用
可以一直延续到这行
也包括这行。

但是在这个行之前有了空行就不行了。

上面的代码是：

~~~
> 这是一个块引用
可以一直延续到这行
也包括这行。

但是在这个行之前有了空行就不行了。
~~~

### 4 代码块

kramdown 支持两种代码块方式。一种是使用四个空格或者一个 tab 的行缩进，另一种是使用 `~` 做为分割符号，所以内容不需要缩进：

例如：

下面是一个代码块。

    这里这里。

实现方式：

~~~
下面是一个代码块。

    这里这里。
~~~

另一种方式：

~~~~
这是一个代码块。
~~~
结束行的波浪线不能少于
开始的波浪线。
~~~~~~~~~~~~

实现方式：
~~~~~
~~~~
这是一个代码块。
~~~
结束行的波浪线不能少于
开始的波浪线。
~~~~
~~~~~~~~~~~~~~~~~~~

下面是一个指定了编程语言的代码块：

~~~ ruby
def what?
  42
end
~~~

实现方式：
~~~~
~~~ ruby
def what?
  42
end
~~~
~~~~

### 5 水平线

在 kramdown 中插入一条水平线很容易：在一个空行前使用三个星号或者横线或者下划线即可，符号之间可以加入空格或者 tab。

例如插入 4 条水平线：

* * *

---

   -   -   - -

----------------------------

实现方式：

~~~
* * *

---

   -   -   - -

----------------------------
~~~

### 6 列表

kramdown 支持有序列表和无序列表。有序列表始于一个数字，然后是一个点，一个空格，然后是列表项文字。列表项内容可包括块级元素。所有具有相同的缩进的带有列表项标记的行为同一列表项。

例如：

1. 这是一个列表项
2. 这是另一个列表项
2. 这是第三个列表项
   目的内容

实现方式：

~~~
1. 这是一个列表项
2. 这是另一个列表项
2. 这是第三个列表项
   目的内容
~~~

就像块引用一样，你可以使用偷懒方式使用列表项标记：

* 一个带有附加内容
的列表项

实现方式：

~~~
* 一个带有附加内容
的列表项
~~~

当内容包含块级元素时你可以这样做：

1. 这是一个列表项

   > 带有一个块引用

   # 和一个标题

2. 另一个列表项

实现方式：

~~~
1. 这是一个列表项

   > 带有一个块引用

   # 和一个标题

2. 另一个列表项
~~~

嵌套列表也很容易实现：

1. 列表一
   1. 子列表一
   2. 子列表二
   3. 子列表三
1. 列表二

实现方式：
~~~
1. 列表一
   1. 子列表一
   2. 子列表二
   3. 子列表三
1. 列表二
~~~

如果列表跟在其他块级元素的后面可能会连在一起，除非至少有一个空行隔开。例如段落后面的列表：

~~~
这是一个段落。
1. 这不是一个列表。

1. 这是一个列表！
~~~

显示如下：

这是一个段落。
1. 这不是一个列表。
1. 这是一个列表！

看起来，这个问题解决了！***段落后面跟着列表，会优先显示列表***。

无序列标是一个星号或者横线或者加号（三者也可以混用）后面再跟一个空格构成。其他规则同有序列表：

* 列表项目一
+ 列表项目二
- 列表项目三

实现方式：

~~~
* 列表项目一
+ 列表项目二
- 列表项目三
~~~

### 7 定义类表

定义列表工作方式类似于普通列表，主要用于关联术语和定义。定义列表开始像是普通的段落一样，但是接下来的行要以冒号开始，然后就是概念的解释内容。一个术语可能有多种解释，多个术语也可以有相同的解释。段落的前面每行都是一个术语。例如：

术语
: 定义
: 另一个定义

另一个术语
还有一个术语
: 术语的定义解释

实现方式：

~~~
术语
: 定义
: 另一个定义

另一个术语
还有一个术语
: 术语的定义解释
~~~

如果在定义前插入一个空行（注：在术语和定义之间有且仅有一个空行），定义会被一个段落包裹：

术语

: 定义
: 定义

实现方式：

~~~
术语

: 定义
: 定义
~~~

每个术语可以使用行内元素定制样式，每个定义可以被解析为块级元素。例如，你可以在定义中使用任何块级元素。只需要让定义的行使用相同的缩进即可：

这*是*一个术语

: 这很是一个段落

  > 一个块饮用

  # 一个标题
  
实现方式：

~~~
这*是*一个术语

: 这很是一个段落

  > 一个块饮用

  # 一个标题
~~~

### 8 表格

kramdown 支持使用语法创建简单表格。表格的每行始于一个管道符 `|`。如果管道符紧跟着一个连接线 `-`，一个分割行就创建了。分割行用于分割表头和表体（可选对齐表格栏），分割表体成多个部分等。如果管道符跟着等号 `=`，下面的表格行就是表脚了。

例如：

|一个|表格|
|有两|行|

实现方式：

~~~
|一个|表格|
|有两|行|
~~~

再如：

| Header1 | Header2 | Header3 |
|:--------|:-------:|--------:|
| cell1   | cell2   | cell3   |
| cell4   | cell5   | cell6   |
|----
| cell1   | cell2   | cell3   |
| cell4   | cell5   | cell6   |
|=====
| Foot1   | Foot2   | Foot3
{: rules="groups"}

实现方式：

~~~
| Header1 | Header2 | Header3 |
|:--------|:-------:|--------:|
| cell1   | cell2   | cell3   |
| cell4   | cell5   | cell6   |
|----
| cell1   | cell2   | cell3   |
| cell4   | cell5   | cell6   |
|=====
| Foot1   | Foot2   | Foot3
{: rules="groups"}
~~~

### 9 HTML 元素

karmdown 允许使用块级 HTML 标签（div，p，pre……）标记整块文字——只需使用块级 HTML 标签开始即可。kramdown 语法一般不会处理 HTML 标签内部的参数，除非使用 `parse_block_html` 参数。如果该参数设置为 `true`，那么块级 HTML 标签的内容不管是块级和是行内级都将被 karamdown 解析：

<div style="float: right">
Something that stays right and is not wrapped in a para.
</div>

{::options parse_block_html="true" /}

<div>
This is wrapped in a para.
</div>
<p>
This can contain only *span* level elements.
</p>

实现方式：

~~~
<div style="float: right">
Something that stays right and is not wrapped in a para.
</div>

{::options parse_block_html="true" /}

<div>
This is wrapped in a para.
</div>
<p>
This can contain only *span* level elements.
</p>
~~~

### 10 块属性

可以对块级元素设定属性。直接在块的后面添加块行内属性列表（IAL）。一个块的 IAL 包括一个左花括号，然后是一个冒号，然后是属性设定，然后是右花括号。看一个设定块引用的 `title` 属性的例子：

> 一个帅气的块引用
{: title="块引用的标题"}

实现方式：

~~~
> 一个帅气的块引用
{: title="块引用的标题"}
~~~

作为常见的想要设置更多的 CSS 类到一个元素的方式，这就是快捷方式：

> 帅气的块引用
{: .class1 .class2}

实现方式：

~~~
> 帅气的块引用
{: .class1 .class2}
~~~

也有设置 ID 的快捷方式，只需在 ID 前加一个井号即可：

> 帅气的块引用
{: #with-a-id}

实现方式：

~~~
> 帅气的块引用
{: #with-a-id}
~~~

有时我们想要对不同的元素使用相同的属性。kramdown 允许在一个地方定义属性列表（ALD）而在其他元素中引用该属性列表。ALD 与 IAL 具有类似的结构，但是冒号被冒号+引用名+冒号取代了。通过在一个块使用引用名就可以起到包含了一个属性列表的作用：

{:refdef: .c1 #id .c2 title="title"}
paragraph
{: refdef}

实现方式：

~~~
{:refdef: .c1 #id .c2 title="title"}
paragraph
{: refdef}
~~~

一个块的 IAL 或者 ALD 的顺序是很重要的，因为后定义的属性会覆盖前面定义的属性：

{:refdef: .c1 #id .c2 title="title"}
paragraph
{: refdef .c3 title="t" #para}

实现方式：

~~~
{:refdef: .c1 #id .c2 title="title"}
paragraph
{: refdef .c3 title="t" #para}
~~~

### 11 扩展

kramdown 通过一些常用的语法提供了一些很少用的功能。这允许需要的时候可以使用这些扩展功能。当前有些扩展可以忽略文字（类似于注释），或者插入输出 kramdown 选项设置的文字。

这有一个显示插入注释的示例：

This is a paragraph
{::comment}
This is a comment which is
completely ignored.
{:/comment}
... paragraph continues here.

Extensions can also be used
inline {::nomarkdown}**see**{:/}!

实现方式：

~~~
This is a paragraph
{::comment}
This is a comment which is
completely ignored.
{:/comment}
... paragraph continues here.

Extensions can also be used
inline {::nomarkdown}**see**{:/}!
~~~

如上所述，扩展语法类同于 ALD。然而扩展名没有终止冒号，而且扩展结束标签在扩展名字和冒号之间需要一个反斜线。当然也可以使用结束标签的简化形式，如`{:/}`。属性定义可以用空格同将属性名和开始标签分开。如果扩展没有主体，也可以在右侧使用一个斜线关闭括号：


{::options auto_ids="false" /}
# Header without id

实现方式：

~~~
{::options auto_ids="false" /}
# Header without id
~~~

## 二 行内级元素标记——文字修饰符合

### 1 加重

通过给指定文字前后加上星号或者下划线来将其标为重点文字：

这是*重点*， _这_ 也是!

实现方式：

~~~
这是*重点*， _这_ 也是!
~~~

注意：
1. 这里我们对该显示方式做了优化，使用字符下面加点的方式显示！
2. 对于使用下划线的形式，由于前后需要加上空格才能正常显示，所以对于汉语书写推荐使用***星号***形式。

加粗可以通过双星号实现：

这是**加粗**，**这**也是！

实现方式：

~~~
这是**加粗**，**这**也是！
~~~

星号也可以用于将一个词的一部分加粗：

**J**ekyll 是一款静态网站生成软件。

实现方式：

~~~
**J**ekyll 是一款静态网站生成软件。
~~~

### 2 链接和图像

最基本的链接生成方式是用方括号中写入链接文字，随后将链接地址放入圆括号中：

一个可以访问 kramdown 主页的[链接](http://kramdown.gettalong.org)

实现方式：

~~~
一个可以访问 kramdown 主页的[链接](http://kramdown.gettalong.org)
~~~

也可以加入 `title` 提示：

一个可以访问 kramdown 主页的[链接](http://kramdown.gettalong.org "kramdown 主页")

实现方式：

~~~
一个可以访问 kramdown 主页的[链接](http://kramdown.gettalong.org "kramdown 主页")
~~~

还有另一种不打断文字流的方式创建链接。将 URL 和 title 通过参考名定义，然后在文中就可以用方括号引用此参考名来使用了：

可以访问 kramdown 主页的[链接][kramdown link]。

[kramdown link]: http://kramdown.gettalong.org "kramdown 主页"

实现方式：
~~~
可以访问 kramdown 主页的[链接][kramdown link]

[kramdown link]: http://kramdown.gettalong.org "kramdown 主页"
~~~

如果链接文字就是参考名，第二个方括号可以省略：

可以访问 [kramdown 主页]。

[kramdown 主页]: http://kramdown.gettalong.org "kramdown 主页"

实现方式：

~~~
可以访问 [kramdown 主页]。

[kramdown 主页]: http://kramdown.gettalong.org "kramdown 主页"
~~~

图像也是以类似方式创建：只需要在方括号前面加一个叹号。方括号内的链接文字就是图像的替换文字，链接 URL
就是图像的源地址：

一个图像：![青草](https://kramdown.gettalong.org/img/image.jpg)

实现方式：

~~~
一个图像：![青草](https://kramdown.gettalong.org/img/image.jpg)
~~~

### 3 行内代码

将文字使用反引号`` ` ``引起来就完成了代码标记：

用 `Kramdown::Document.new(text).to_html` 方法将 `text` 使用 kramdown 语法转换为 HTML。

实现方法：

~~~
用 `Kramdown::Document.new(text).to_html` 方法将 `text` 使用 kramdown 语法转换为 HTML。
~~~

如果你想要使用字符反引号，只需要用两个或者更多的成对反引号将其包裹即可。然后需要在中间的反引号左右各加一个空格会被忽略掉：

用反引号标记代码，例如 ````  `code` ````。

实现方式：

~~~
用反引号标记代码，例如 ````  `code` ````。
~~~

### 4 脚注

kramdown 中脚注很好用。文字中只需要设置一个脚注标记（方括号内一个扬抑符^和一个脚标名），然后在某处定义该脚注（看起来类似于参考链接的定义）：

这是带有脚注[^1]的文字。

[^1]: 在这里书写校注的内容

实现方式：

~~~
这是带有脚注[^1]的文字。

[^1]: 在这里书写校注的内容
~~~

脚注的定义可以包括任何块级元素，只要所有行都与校注的定义具有同级别的缩进（四个空格或者一个 tab）即可：


这是带有脚注[^i]的文字。

[^i]:
    在这里书写校注的内容

    > 这里还有一个引用！

实现方式：

~~~
这是带有脚注[^i]的文字。

[^i]:
    在这里书写校注的内容

    > 这里还有一个引用！
~~~

如上所见，脚注的名字仅用于做为锚点，而数字会根据文档顺序自动生成。上面我们为脚注起了 i 的名字，却根据顺序显示了 2。相同的脚注会指向同一个脚注内容。

### 5 缩写

缩写一旦定义，就会以提示框形式显示。所以你可以先编写文字，最后在定义缩写。例如

这是一个HTML示例。

*[HTML]: Hyper Text Markup Lanugage

实现方式：

~~~
这是一个HTML示例。

*[HTML]: Hyper Text Markup Lanugage
~~~

### 6 HTML 元素

HTML 不仅支持块级元素也支持行内元素：

这是<span style="color: red">用红色书写</span>的文字。

实现方式：

~~~
这是<span style="color: red">用红色书写</span>的文字。
~~~

### 7 行内属性

块级元素可以设定属性，行内元素可以使用*span inline attribute list(缩写为 span IAL)*。一个 span IAL 就像一个块一样具有相同的语法——就是在 span 后马上写入属性定义：

这是*红色*{: style="color: red"}。

实现方式：

~~~
这是*红色*{: style="color: red"}。
~~~
